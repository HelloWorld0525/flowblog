针对 FlowBlog 项目（Java 后端 + MySQL 数据库 + Nginx 代理 + 存储在本地的图片），需要备份以下 四样核心资产：

1. 数据库数据 (.sql 文件)：博客的文章、评论、用户数据，最重要。
2. 上传的图片/文件 (files 目录)：文章里的图片，丢了就找不回了。
3. Nginx 配置文件 (flowblog.conf)：省得下次去新服务器还要重新回忆怎么配。
4. 启动脚本 (restart.sh)：方便下次直接复用。

按照以下步骤操作，先把所有东西在服务器上打包成一个大包裹，然后一次性下载到本地电脑。

------

### 第一步：创建备份临时目录

登录云服务器，创建一个专门放备份文件的文件夹，以免搞乱现有环境。

Bash

```
# 1. 创建备份目录
mkdir -p /home/flowblog/backup_2026

# 2. 进入该目录
cd /home/flowblog/backup_2026
```

### 第二步：备份数据库 (MySQL)

这是最关键的一步。由于我们之前的架构是从 Docker 迁移过来的， MySQL 很可能还在 Docker 容器里运行。

请先查看你的 MySQL 容器名字：

Bash

```
docker ps
```

(找到那个 Image 名字包含 mysql 的容器 ID 或名字，这里的名字是blog-mysql)。

执行备份命令（任选其一）：

- 方案 A（如果你 MySQL 是用 Docker 跑的）：
   Bash

  ```
  # 格式：docker exec [容器名] mysqldump -u[用户名] -p[密码] [数据库名] > [导出文件名]
  # 注意：-p和密码之间没有空格
  docker exec blog-mysql mysqldump -uroot -p0525 my_blog_db > blog_data.sql
  ```

  (注：如果你的密码包含特殊字符，建议只写 -p，回车后它会提示你输入密码)

- 方案 B（如果你后来在服务器本机直接装了 MySQL）：

检查一下： 执行 ls -lh，看看 blog_data.sql 是不是只有 0KB。如果是 0KB 说明备份失败（密码错或连不上），如果有几十 KB 或几 MB 就对了。

### 第三步：备份静态资源 (图片文件)

图片都存在 /home/flowblog/blog-backend/files 里。我们将这个文件夹压缩打包。

Bash

```
# 使用 tar 命令压缩 files 目录
# -c: 创建, -z: gzip压缩, -v: 显示过程, -f: 文件名
tar -czvf images_backup.tar.gz -C /home/flowblog/blog-backend files
```

### 第四步：备份配置文件 (Nginx & 脚本)

把改好的 Nginx 配置和启动脚本也拷过来。

Bash

```
# 1. 备份 Nginx 配置
cp /etc/nginx/conf.d/flowblog.conf ./nginx_flowblog.conf

# 2. 备份重启脚本
cp /home/flowblog/restart.sh ./restart_script.sh
```

### 第五步：打成总包 (打包)

现在 /home/flowblog/backup_2026 目录下应该有 4 个文件了。把它们打成一个总的压缩包，方便下载。

Bash

```
# 回到上一级
cd /home/flowblog

# 打总包
tar -czvf flowblog_full_backup.tar.gz backup_2026
```

此时， /home/flowblog/ 目录下会有一个名为 flowblog_full_backup.tar.gz 的文件。

------

### 第六步：下载到本地电脑 (Windows)

两个办法：

#### 方法 A：使用 Git Bash (命令行，推荐)

在本地电脑（Windows）上打开 Git Bash，执行以下命令（注意替服务器 IP）：

Bash

```
# scp [用户名]@[IP]:[服务器文件路径] [本地路径]
scp root@服务器IP:/home/flowblog/flowblog_full_backup.tar.gz ./
```

输入服务器密码后，文件就会下载到你当前的 Git Bash 目录下。

#### 方法 B：使用 SFTP 工具 (图形化)

 Xshell (自带 Xftp)、FileZilla 或 WinSCP：

1. 连接服务器。
2. 进入 /home/flowblog/ 目录。
3. 找到 flowblog_full_backup.tar.gz。
4. 直接拖拽到Windows 桌面上。

------

### ✅ 验证备份

1. blog_data.sql：用记事本打开，看看里面是不是有 INSERT INTO 语句（文章内容）。
2. images_backup.tar.gz：解压看看图片是不是都在。
3. 配置：看看 Nginx 配置是不是最新的。